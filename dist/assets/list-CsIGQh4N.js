import{h as K,r as l,j as e,M as C,l as Q,e as p,S as f,f as y,B as w,A as X,cp as Y,i as V,J as Z,dp as $,cP as ee,F as te,L as oe,dB as se,c as re,a as le,bv as ne,cz as ie,p as g,dJ as D,v as ae,R as ce,C as de,H as ue}from"./index-DQumLT9L.js";import"./axios-DYCcKomT.js";import"./mui-one-time-password-input.es-CrCnoD2A.js";import"./image-BQLAgES7.js";import"./highlight-DjC4x1cy.js";import"./styles-CbjE8cRF.js";import"./_baseToString-DDDuf8FE.js";import"./color-picker-DvmP0mZl.js";import{u as he}from"./product-CpH4pROd.js";import{E as O}from"./empty-content-C-k1mDHV.js";import{C as pe}from"./confirm-dialog-Bc-Xsgi3.js";import{C as xe}from"./custom-breadcrumbs-BQV5gBXp.js";import{F as L}from"./FormControl-CkY9ZgKl.js";import{I as F}from"./TextField-Y2PbW22P.js";import{S as G,O as N}from"./Select-DVR-Fv5D.js";import{C as E}from"./Checkbox-Sn2x42hf.js";import{C as M}from"./Chip-BV5fqBH-.js";import{f as me}from"./format-number-DbkgK7Ht.js";import{G as P,D as be,a as fe,b as je,c as Ce,d as ge,e as we}from"./DataGrid-B_6U39mt.js";import"./incrementer-button-B7RT14Hr.js";import"./product-details-carousel-B4D-kLpq.js";import"./styles-CZezhFX0.js";import"./DialogTitle-BR7MB9Ne.js";import"./dialogTitleClasses-DoSL4AIa.js";import"./DialogContent-BWFRvN7V.js";import"./DialogActions-BM5MBnWR.js";import"./FormLabel-DQT9OHMa.js";import"./Menu-DSL53x_F.js";import"./SwitchBase-C1d58dFN.js";import"./ListItemIcon-ClZD34nW.js";import"./index-SXeguD1C.js";import"./Autocomplete-CrAcmVXV.js";import"./Close-88YqgUWU.js";import"./ClickAwayListener-DVtd3L8I.js";import"./Switch-BGGFZMDP.js";import"./Skeleton-DoNq6b-x.js";import"./CircularProgress-D2eR23uJ.js";import"./TablePagination-BxLclrvg.js";import"./FirstPage-BHRCtckg.js";import"./TableCell-C3uJnGFm.js";import"./FormControlLabel-DtJZHq2N.js";import"./use-light-box-C-8sc5U8.js";import"./carousel-arrow-index-k919HEf0.js";function ye({filters:t,onFilters:n,stockOptions:c,publishOptions:d}){const i=K(),[x,h]=l.useState(t.stock),[s,u]=l.useState(t.publish),m=l.useCallback(r=>{const{target:{value:a}}=r;h(typeof a=="string"?a.split(","):a)},[]),b=l.useCallback(r=>{const{target:{value:a}}=r;u(typeof a=="string"?a.split(","):a)},[]),k=l.useCallback(()=>{n("stock",x)},[n,x]),v=l.useCallback(()=>{n("publish",s)},[n,s]);return e.jsxs(e.Fragment,{children:[e.jsxs(L,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(F,{children:"Stock"}),e.jsx(G,{multiple:!0,value:x,onChange:m,input:e.jsx(N,{label:"Stock"}),renderValue:r=>r.map(a=>a).join(", "),onClose:k,sx:{textTransform:"capitalize"},children:c.map(r=>e.jsxs(C,{value:r.value,children:[e.jsx(E,{disableRipple:!0,size:"small",checked:x.includes(r.value)}),r.label]},r.value))})]}),e.jsxs(L,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(F,{children:"Publish"}),e.jsx(G,{multiple:!0,value:s,onChange:b,input:e.jsx(N,{label:"Publish"}),renderValue:r=>r.map(a=>a).join(", "),onClose:v,sx:{textTransform:"capitalize"},children:d.map(r=>e.jsxs(C,{value:r.value,children:[e.jsx(E,{disableRipple:!0,size:"small",checked:s.includes(r.value)}),r.label]},r.value))})]}),e.jsxs(Q,{open:i.open,onClose:i.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(C,{onClick:()=>{i.onClose()},children:[e.jsx(p,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(C,{onClick:()=>{i.onClose()},children:[e.jsx(p,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(C,{onClick:()=>{i.onClose()},children:[e.jsx(p,{icon:"solar:export-bold"}),"Export"]})]})]})}function ke({filters:t,onFilters:n,onResetFilters:c,results:d,...i}){const x=l.useCallback(s=>{const u=t.stock.filter(m=>m!==s);n("stock",u)},[t.stock,n]),h=l.useCallback(s=>{const u=t.publish.filter(m=>m!==s);n("publish",u)},[t.publish,n]);return e.jsxs(f,{spacing:1.5,...i,children:[e.jsxs(y,{sx:{typography:"body2"},children:[e.jsx("strong",{children:d}),e.jsx(y,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(f,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!t.stock.length&&e.jsx(A,{label:"Stock:",children:t.stock.map(s=>e.jsx(M,{label:s,size:"small",onDelete:()=>x(s)},s))}),!!t.publish.length&&e.jsx(A,{label:"Publish:",children:t.publish.map(s=>e.jsx(M,{label:s,size:"small",onDelete:()=>h(s)},s))}),e.jsx(w,{color:"error",onClick:c,startIcon:e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function A({label:t,children:n,sx:c,...d}){return e.jsxs(f,{component:X,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...c},...d,children:[e.jsx(y,{component:"span",sx:{typography:"subtitle2"},children:t}),e.jsx(f,{spacing:1,direction:"row",flexWrap:"wrap",children:n})]})}function ve({params:t}){return e.jsx(e.Fragment,{children:me(t.row.price)})}function Se({params:t}){return e.jsx(Y,{variant:"soft",color:t.row.publish==="published"&&"info"||"default",children:t.row.publish})}function Pe({params:t}){return e.jsx(V,{primary:Z(t.row.createdAt),secondary:$(t.row.createdAt),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}function Re({params:t}){return e.jsxs(f,{sx:{typography:"caption",color:"text.secondary"},children:[e.jsx(ee,{value:t.row.available*100/t.row.quantity,variant:"determinate",color:t.row.inventoryType==="out of stock"&&"error"||t.row.inventoryType==="low stock"&&"warning"||"success",sx:{mb:1,height:6,maxWidth:80}}),!!t.row.available&&t.row.available," ",t.row.inventoryType]})}function Te({params:t}){return e.jsxs(f,{direction:"row",alignItems:"center",sx:{py:2,width:1},children:[e.jsx(te,{alt:t.row.name,src:t.row.coverUrl,variant:"rounded",sx:{width:64,height:64,mr:2}}),e.jsx(V,{disableTypography:!0,primary:e.jsx(oe,{noWrap:!0,color:"inherit",variant:"subtitle2",onClick:t.row.onViewRow,sx:{cursor:"pointer"},children:t.row.name}),secondary:e.jsx(y,{component:"div",sx:{typography:"body2",color:"text.disabled"},children:t.row.category}),sx:{display:"flex",flexDirection:"column"}})]})}const B=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],R={publish:[],stock:[]},Ie={category:!1},De=["category","actions"];function Oe(){const{enqueueSnackbar:t}=se(),n=re(),c=le(),d=ne(),{products:i,productsLoading:x}=he(),[h,s]=l.useState([]),[u,m]=l.useState(R),[b,k]=l.useState([]),[v,r]=l.useState(Ie);l.useEffect(()=>{i.length&&s(i)},[i]);const a=Le({inputData:h,filters:u}),z=!ie(R,u),T=l.useCallback((o,j)=>{m(S=>({...S,[o]:j}))},[]),W=l.useCallback(()=>{m(R)},[]),H=l.useCallback(o=>{const j=h.filter(S=>S.id!==o);t("Delete success!"),s(j)},[t,h]),_=l.useCallback(()=>{const o=h.filter(j=>!b.includes(j.id));t("Delete success!"),s(o)},[t,b,h]),U=l.useCallback(o=>{c.push(g.dashboard.product.edit(o))},[c]),q=l.useCallback(o=>{c.push(g.dashboard.product.details(o))},[c]),I=[{field:"category",headerName:"Category",filterable:!1},{field:"name",headerName:"Product",flex:1,minWidth:360,hideable:!1,renderCell:o=>e.jsx(Te,{params:o})},{field:"createdAt",headerName:"Create at",width:160,renderCell:o=>e.jsx(Pe,{params:o})},{field:"inventoryType",headerName:"Stock",width:160,type:"singleSelect",valueOptions:D,renderCell:o=>e.jsx(Re,{params:o})},{field:"price",headerName:"Price",width:140,editable:!0,renderCell:o=>e.jsx(ve,{params:o})},{field:"publish",headerName:"Publish",width:110,type:"singleSelect",editable:!0,valueOptions:B,renderCell:o=>e.jsx(Se,{params:o})},{type:"actions",field:"actions",headerName:" ",align:"right",headerAlign:"right",width:80,sortable:!1,filterable:!1,disableColumnMenu:!0,getActions:o=>[e.jsx(P,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:eye-bold"}),label:"View",onClick:()=>q(o.row.id)}),e.jsx(P,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:pen-bold"}),label:"Edit",onClick:()=>U(o.row.id)}),e.jsx(P,{showInMenu:!0,icon:e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),label:"Delete",onClick:()=>{H(o.row.id)},sx:{color:"error.main"}})]}],J=()=>I.filter(o=>!De.includes(o.field)).map(o=>o.field);return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{maxWidth:d.themeStretch?!1:"lg",sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(xe,{heading:"List",links:[{name:"Dashboard",href:g.dashboard.root},{name:"Product",href:g.dashboard.product.root},{name:"List"}],action:e.jsx(w,{component:ce,href:g.dashboard.product.new,variant:"contained",startIcon:e.jsx(p,{icon:"mingcute:add-line"}),children:"New Product"}),sx:{mb:{xs:3,md:5}}}),e.jsx(de,{sx:{height:{xs:800,md:2},flexGrow:{md:1},display:{md:"flex"},flexDirection:{md:"column"}},children:e.jsx(be,{checkboxSelection:!0,disableRowSelectionOnClick:!0,rows:a,columns:I,loading:x,getRowHeight:()=>"auto",pageSizeOptions:[5,10,25],initialState:{pagination:{paginationModel:{pageSize:10}}},onRowSelectionModelChange:o=>{k(o)},columnVisibilityModel:v,onColumnVisibilityModelChange:o=>r(o),slots:{toolbar:()=>e.jsxs(e.Fragment,{children:[e.jsxs(fe,{children:[e.jsx(ye,{filters:u,onFilters:T,stockOptions:D,publishOptions:B}),e.jsx(je,{}),e.jsxs(f,{spacing:1,flexGrow:1,direction:"row",alignItems:"center",justifyContent:"flex-end",children:[!!b.length&&e.jsxs(w,{size:"small",color:"error",startIcon:e.jsx(p,{icon:"solar:trash-bin-trash-bold"}),onClick:n.onTrue,children:["Delete (",b.length,")"]}),e.jsx(Ce,{}),e.jsx(ge,{}),e.jsx(we,{})]})]}),z&&e.jsx(ke,{filters:u,onFilters:T,onResetFilters:W,results:a.length,sx:{p:2.5,pt:0}})]}),noRowsOverlay:()=>e.jsx(O,{title:"No Data"}),noResultsOverlay:()=>e.jsx(O,{title:"No results found"})},slotProps:{columnsPanel:{getTogglableColumns:J}}})})]}),e.jsx(pe,{open:n.value,onClose:n.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",b.length," "]})," items?"]}),action:e.jsx(w,{variant:"contained",color:"error",onClick:()=>{_(),n.onFalse()},children:"Delete"})})]})}function Le({inputData:t,filters:n}){const{stock:c,publish:d}=n;return c.length&&(t=t.filter(i=>c.includes(i.inventoryType))),d.length&&(t=t.filter(i=>d.includes(i.publish))),t}function yt(){return e.jsxs(e.Fragment,{children:[e.jsx(ue,{children:e.jsx("title",{children:" Dashboard: Product List"})}),e.jsx(Oe,{})]})}export{yt as default};
