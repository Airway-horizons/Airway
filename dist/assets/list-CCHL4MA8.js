import{j as t,I as g,B as y,e as P,aj as v,r as p,t as b,T as j,aq as C,C as I,S as w,p as k,U as B}from"./index-BhdCYkZV.js";import{m as O,p as A}from"./styles-DRY8vysJ.js";import"./_calendar-Dyx2_jOo.js";import"./axios-DYmJw9DC.js";import"./label-Coxr4BNq.js";import"./styles-RB4_yDgs.js";import"./image-BJJE_TPR.js";import"./text-max-line-DRJEIWKP.js";import"./index.esm-D-Soo4Ud.js";import"./upgrade-storage-illustration-dsGKY008.js";import"./styles-NzEnf_1s.js";import{S as T,o as f}from"./search-not-found-DMrYv-sT.js";import{u as L}from"./use-debounce-DVDMcYeC.js";import{u as W,a as F,P as R}from"./post-list-Bvst5T6K.js";import{C as E}from"./custom-popover-DFZVa3lV.js";import{u as H}from"./use-popover-CQG8HHeb.js";import{B as U}from"./Button-DZJrFnGY.js";import{M}from"./MenuItem-Dj2whVcC.js";import{A as Q}from"./Autocomplete-p0Ap7KKL.js";import{T as K}from"./TextField-CncyZTD-.js";import{I as N}from"./InputAdornment-C-W3VgYD.js";import{A as V}from"./Avatar-BHKZIHTj.js";import"./_baseIteratee-DAAn3-s3.js";import"./format-time-5eis5PTK.js";import"./format-number-CumFFTXv.js";import"./Card-BFYwemZH.js";import"./CardContent-CXEklQTg.js";import"./Close-CIB2ylP8.js";import"./createSvgIcon-BFEWvRmZ.js";import"./Chip-bQaCAoIM.js";import"./useFormControl-Bfj9sF6o.js";import"./formControlState-Dq1zat_P.js";import"./useSlot-D6O1eN6S.js";const _=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function q({sort:o,sortOptions:r,onSort:l}){const n=H();return t.jsxs(t.Fragment,{children:[t.jsxs(U,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:t.jsx(g,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",t.jsx(y,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:o})]}),t.jsx(E,{open:n.open,onClose:n.onClose,sx:{width:140},children:r.map(i=>t.jsx(M,{selected:o===i.value,onClick:()=>{n.onClose(),l(i.value)},children:i.label},i.value))})]})}function z({query:o,results:r,onSearch:l,hrefItem:n,loading:i}){const m=P(),c=e=>{m.push(n(e))},u=e=>{o&&e.key==="Enter"&&c(o)};return t.jsx(Q,{sx:{width:{xs:1,sm:260}},loading:i,autoHighlight:!0,popupIcon:null,options:r,onInputChange:(e,s)=>l(s),getOptionLabel:e=>e.title,noOptionsText:t.jsx(T,{query:o,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(e,s)=>e.id===s.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${v.option}`]:{pl:.75}}}},renderInput:e=>t.jsx(K,{...e,placeholder:"Search...",onKeyUp:u,InputProps:{...e.InputProps,startAdornment:t.jsx(N,{position:"start",children:t.jsx(g,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:t.jsxs(t.Fragment,{children:[i?t.jsx(g,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,e.InputProps.endAdornment]})}}),renderOption:(e,s,{inputValue:d})=>{const h=O(s.title,d),x=A(s.title,h);return p.createElement("li",{...e,key:s.id},t.jsx(V,{alt:s.title,src:s.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},s.id),t.jsx(b,{underline:"none",onClick:()=>c(s.title),children:x.map((a,S)=>t.jsx(j,{component:"span",color:a.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:a.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:a.text},S))},d))}})}function G(){const o=C(),[r,l]=p.useState("latest"),[n,i]=p.useState(""),m=L(n),{posts:c,postsLoading:u}=W(),{searchResults:e,searchLoading:s}=F(m),d=$({inputData:c,sortBy:r}),h=p.useCallback(a=>{l(a)},[]),x=p.useCallback(a=>{i(a)},[]);return t.jsxs(I,{maxWidth:o.themeStretch?!1:"lg",children:[t.jsx(j,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Blog"}),t.jsxs(w,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[t.jsx(z,{query:m,results:e,onSearch:x,loading:s,hrefItem:a=>k.post.details(a)}),t.jsx(q,{sort:r,onSort:h,sortOptions:_})]}),t.jsx(R,{posts:d,loading:u})]})}const $=({inputData:o,sortBy:r})=>r==="latest"?f(o,["createdAt"],["desc"]):r==="oldest"?f(o,["createdAt"],["asc"]):r==="popular"?f(o,["totalViews"],["desc"]):o;function Bt(){return t.jsxs(t.Fragment,{children:[t.jsx(B,{children:t.jsx("title",{children:" Post: List"})}),t.jsx(G,{})]})}export{Bt as default};
