import{c as F,h as _,j as e,f as v,F as E,i as A,J as M,dp as Q,cp as H,d as k,e as u,bh as J,S as w,A as V,l as $,M as D,B as L,r as d,I as Y,dB as Z,bv as X,a as ee,dY as se,bw as te,p as I,v as oe,C as ae,cm as re,t as ne,co as le,bu as ie,bt as ce,dZ as de,bB as he}from"./index-DQumLT9L.js";import{C as q}from"./confirm-dialog-Bc-Xsgi3.js";import{C as xe}from"./custom-breadcrumbs-BQV5gBXp.js";import{u as pe,T as ue,e as me,a as ge,g as be}from"./table-pagination-custom-BoBFiRKr.js";import{T as je}from"./table-no-data-CP2_rdMm.js";import{T as Ce}from"./table-empty-rows-w9VmU_DA.js";import{T as we}from"./table-head-custom-aAraUG11.js";import{f as W}from"./format-number-DbkgK7Ht.js";import{T as N,a as fe,b as ye,c as ve}from"./TableHead-CQqIrshP.js";import{T as b}from"./TableCell-C3uJnGFm.js";import{C as Pe}from"./Checkbox-Sn2x42hf.js";import{D as U}from"./DatePicker-CqbniZ6K.js";import{f as Te,T as De}from"./TextField-Y2PbW22P.js";import{s as ke}from"./utils-DrUvN8WH.js";import{C as O}from"./Chip-BV5fqBH-.js";function Se({row:o,selected:s,onViewRow:h,onSelectRow:i,onDeleteRow:x}){const{items:l,status:c,orderNumber:a,createdAt:m,customer:r,totalQuantity:n,subTotal:g}=o,P=F(),f=F(),j=_(),y=e.jsxs(N,{hover:!0,selected:s,children:[e.jsx(b,{padding:"checkbox",children:e.jsx(Pe,{checked:s,onClick:i})}),e.jsx(b,{children:e.jsx(v,{onClick:h,sx:{cursor:"pointer","&:hover":{textDecoration:"underline"}},children:a})}),e.jsxs(b,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(E,{alt:r.name,src:r.avatarUrl,sx:{mr:2}}),e.jsx(A,{primary:r.name,secondary:r.email,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(b,{children:e.jsx(A,{primary:M(m),secondary:Q(m),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsxs(b,{align:"center",children:[" ",n," "]}),e.jsxs(b,{children:[" ",W(g)," "]}),e.jsx(b,{children:e.jsx(H,{variant:"soft",color:c==="completed"&&"success"||c==="pending"&&"warning"||c==="cancelled"&&"error"||"default",children:c})}),e.jsxs(b,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(k,{color:f.value?"inherit":"default",onClick:f.onToggle,sx:{...f.value&&{bgcolor:"action.hover"}},children:e.jsx(u,{icon:"eva:arrow-ios-downward-fill"})}),e.jsx(k,{color:j.open?"inherit":"default",onClick:j.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),S=e.jsx(N,{children:e.jsx(b,{sx:{p:0,border:"none"},colSpan:8,children:e.jsx(J,{in:f.value,timeout:"auto",unmountOnExit:!0,sx:{bgcolor:"background.neutral"},children:e.jsx(w,{component:V,sx:{m:1.5},children:l.map(C=>e.jsxs(w,{direction:"row",alignItems:"center",sx:{p:T=>T.spacing(1.5,2,1.5,1.5),"&:not(:last-of-type)":{borderBottom:T=>`solid 2px ${T.palette.background.neutral}`}},children:[e.jsx(E,{src:C.coverUrl,variant:"rounded",sx:{width:48,height:48,mr:2}}),e.jsx(A,{primary:C.name,secondary:C.sku,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled",mt:.5}}),e.jsxs(v,{children:["x",C.quantity]}),e.jsx(v,{sx:{width:110,textAlign:"right"},children:W(C.price)})]},C.id))})})})});return e.jsxs(e.Fragment,{children:[y,S,e.jsxs($,{open:j.open,onClose:j.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(D,{onClick:()=>{P.onTrue(),j.onClose()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(D,{onClick:()=>{h(),j.onClose()},children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]})]}),e.jsx(q,{open:P.value,onClose:P.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(L,{variant:"contained",color:"error",onClick:x,children:"Delete"})})]})}function Re({filters:o,onFilters:s,dateError:h}){const i=_(),x=d.useCallback(a=>{s("name",a.target.value)},[s]),l=d.useCallback(a=>{s("startDate",a)},[s]),c=d.useCallback(a=>{s("endDate",a)},[s]);return e.jsxs(e.Fragment,{children:[e.jsxs(w,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsx(U,{label:"Start date",value:o.startDate,onChange:l,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:200}}}),e.jsx(U,{label:"End date",value:o.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:h,helperText:h&&"End date must be later than start date"}},sx:{maxWidth:{md:200},[`& .${Te.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}}),e.jsxs(w,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(De,{fullWidth:!0,value:o.name,onChange:x,placeholder:"Search customer or order number...",InputProps:{startAdornment:e.jsx(Y,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(k,{onClick:i.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),e.jsxs($,{open:i.open,onClose:i.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(D,{onClick:()=>{i.onClose()},children:[e.jsx(u,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(D,{onClick:()=>{i.onClose()},children:[e.jsx(u,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(D,{onClick:()=>{i.onClose()},children:[e.jsx(u,{icon:"solar:export-bold"}),"Export"]})]})]})}function Ae({filters:o,onFilters:s,onResetFilters:h,results:i,...x}){const l=ke(o.startDate,o.endDate),c=d.useCallback(()=>{s("name","")},[s]),a=d.useCallback(()=>{s("status","all")},[s]),m=d.useCallback(()=>{s("startDate",null),s("endDate",null)},[s]);return e.jsxs(w,{spacing:1.5,...x,children:[e.jsxs(v,{sx:{typography:"body2"},children:[e.jsx("strong",{children:i}),e.jsx(v,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(w,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[o.status!=="all"&&e.jsx(B,{label:"Status:",children:e.jsx(O,{size:"small",label:o.status,onDelete:a})}),o.startDate&&o.endDate&&e.jsx(B,{label:"Date:",children:e.jsx(O,{size:"small",label:l,onDelete:m})}),!!o.name&&e.jsx(B,{label:"Keyword:",children:e.jsx(O,{label:o.name,size:"small",onDelete:c})}),e.jsx(L,{color:"error",onClick:h,startIcon:e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function B({label:o,children:s,sx:h,...i}){return e.jsxs(w,{component:V,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...h},...i,children:[e.jsx(v,{component:"span",sx:{typography:"subtitle2"},children:o}),e.jsx(w,{spacing:1,direction:"row",flexWrap:"wrap",children:s})]})}const Ie=[{value:"all",label:"All"},...de],Oe=[{id:"orderNumber",label:"Order",width:116},{id:"name",label:"Customer"},{id:"createdAt",label:"Date",width:140},{id:"totalQuantity",label:"Items",width:120,align:"center"},{id:"totalAmount",label:"Price",width:140},{id:"status",label:"Status",width:110},{id:"",width:88}],z={name:"",status:"all",startDate:null,endDate:null};function Qe(){const{enqueueSnackbar:o}=Z(),s=pe({defaultOrderBy:"orderNumber"}),h=X(),i=ee(),x=F(),[l,c]=d.useState(se),[a,m]=d.useState(z),r=te(a.startDate,a.endDate),n=Be({inputData:l,comparator:be(s.order,s.orderBy),filters:a,dateError:r}),g=n.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage),P=s.dense?56:76,f=!!a.name||a.status!=="all"||!!a.startDate&&!!a.endDate,j=!n.length&&f||!n.length,y=d.useCallback((t,p)=>{s.onResetPage(),m(R=>({...R,[t]:p}))},[s]),S=d.useCallback(()=>{m(z)},[]),C=d.useCallback(t=>{const p=l.filter(R=>R.id!==t);o("Delete success!"),c(p),s.onUpdatePageDeleteRow(g.length)},[g.length,o,s,l]),T=d.useCallback(()=>{const t=l.filter(p=>!s.selected.includes(p.id));o("Delete success!"),c(t),s.onUpdatePageDeleteRows({totalRowsInPage:g.length,totalRowsFiltered:n.length})},[n.length,g.length,o,s,l]),G=d.useCallback(t=>{i.push(I.dashboard.order.details(t))},[i]),K=d.useCallback((t,p)=>{y("status",p)},[y]);return e.jsxs(e.Fragment,{children:[e.jsxs(oe,{maxWidth:h.themeStretch?!1:"lg",children:[e.jsx(xe,{heading:"List",links:[{name:"Dashboard",href:I.dashboard.root},{name:"Order",href:I.dashboard.order.root},{name:"List"}],sx:{mb:{xs:3,md:5}}}),e.jsxs(ae,{children:[e.jsx(re,{value:a.status,onChange:K,sx:{px:2.5,boxShadow:t=>`inset 0 -2px 0 0 ${ne(t.palette.grey[500],.08)}`},children:Ie.map(t=>e.jsx(le,{iconPosition:"end",value:t.value,label:t.label,icon:e.jsx(H,{variant:(t.value==="all"||t.value===a.status)&&"filled"||"soft",color:t.value==="completed"&&"success"||t.value==="pending"&&"warning"||t.value==="cancelled"&&"error"||"default",children:["completed","pending","cancelled","refunded"].includes(t.value)?l.filter(p=>p.status===t.value).length:l.length})},t.value))}),e.jsx(Re,{filters:a,onFilters:y,dateError:r}),f&&e.jsx(Ae,{filters:a,onFilters:y,onResetFilters:S,results:n.length,sx:{p:2.5,pt:0}}),e.jsxs(fe,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(ue,{dense:s.dense,numSelected:s.selected.length,rowCount:n.length,onSelectAllRows:t=>s.onSelectAllRows(t,n.map(p=>p.id)),action:e.jsx(ie,{title:"Delete",children:e.jsx(k,{color:"primary",onClick:x.onTrue,children:e.jsx(u,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(ce,{children:e.jsxs(ye,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(we,{order:s.order,orderBy:s.orderBy,headLabel:Oe,rowCount:n.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:t=>s.onSelectAllRows(t,n.map(p=>p.id))}),e.jsxs(ve,{children:[n.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(t=>e.jsx(Se,{row:t,selected:s.selected.includes(t.id),onSelectRow:()=>s.onSelectRow(t.id),onDeleteRow:()=>C(t.id),onViewRow:()=>G(t.id)},t.id)),e.jsx(Ce,{height:P,emptyRows:me(s.page,s.rowsPerPage,n.length)}),e.jsx(je,{notFound:j})]})]})})]}),e.jsx(ge,{count:n.length,page:s.page,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onRowsPerPageChange:s.onChangeRowsPerPage,dense:s.dense,onChangeDense:s.onChangeDense})]})]}),e.jsx(q,{open:x.value,onClose:x.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(L,{variant:"contained",color:"error",onClick:()=>{T(),x.onFalse()},children:"Delete"})})]})}function Be({inputData:o,comparator:s,filters:h,dateError:i}){const{status:x,name:l,startDate:c,endDate:a}=h,m=o.map((r,n)=>[r,n]);return m.sort((r,n)=>{const g=s(r[0],n[0]);return g!==0?g:r[1]-n[1]}),o=m.map(r=>r[0]),l&&(o=o.filter(r=>r.orderNumber.toLowerCase().indexOf(l.toLowerCase())!==-1||r.customer.name.toLowerCase().indexOf(l.toLowerCase())!==-1||r.customer.email.toLowerCase().indexOf(l.toLowerCase())!==-1)),x!=="all"&&(o=o.filter(r=>r.status===x)),i||c&&a&&(o=o.filter(r=>he(r.createdAt,c,a))),o}export{Qe as O};
