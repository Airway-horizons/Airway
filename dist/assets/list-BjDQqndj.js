import{j as e,S as b,e as h,t as M,T as O,f as B,c as $,h as q,F as ce,i as W,L as de,J as z,dn as N,cn as J,d as w,l as Z,M as y,D as Q,B as F,r as p,I as pe,A as he,dA as me,n as ue,bt as xe,a as ge,dZ as je,bu as be,p as P,v as ve,R as fe,C as V,br as H,ck as Ce,cm as ye,d_ as we,bs as I,bz as De,H as Pe}from"./index-9PXStj3N.js";import{s as _}from"./sumBy-C_xHON2f.js";import{C as X}from"./confirm-dialog-C_PCrWg2.js";import{C as Te}from"./custom-breadcrumbs-DuhqyhxY.js";import{u as ke,g as Se,T as Re,e as Ie,a as Ae}from"./table-pagination-custom-D5m7okT2.js";import{T as Le}from"./table-no-data-BQ4kgqVc.js";import{T as Be}from"./table-empty-rows-Ba3lD_Rl.js";import{T as Fe}from"./table-head-custom-CtFyBfMp.js";import{a as Ee,f as Y}from"./format-number-DdI7Nsn7.js";import{C as U}from"./CircularProgress-CGlsyqdu.js";import{T as We,a as Oe,b as ze,c as Ne}from"./TableHead-D_zytHHe.js";import{T as C}from"./TableCell-C9fDz-S-.js";import{C as ee}from"./Checkbox-CM-8Bpaf.js";import{F as Ve}from"./FormControl-BNnV7ofI.js";import{I as He,f as _e,T as Ue}from"./TextField-CbHhpLIE.js";import{S as Ge,O as Ke}from"./Select-De9_G4gT.js";import{D as G}from"./DatePicker-CzWAb71k.js";import{s as Me}from"./utils-B_LYZQXB.js";import{C as A}from"./Chip-DxwugM88.js";import"./mui-one-time-password-input.es-bso2ZfVA.js";import"./image-DkY_3MJo.js";import"./highlight-LvrKAosx.js";import"./styles-CVRUAcvd.js";import"./invoice-details-B8De4wmD.js";import"./_baseIteratee-Cb4M5Pop.js";import"./_baseToString-BZnTwQyE.js";import"./_baseSum-6o0jC366.js";import"./DialogTitle-BVoaAIUo.js";import"./dialogTitleClasses-BDGSYXIO.js";import"./DialogContent-CF8M1ZCn.js";import"./DialogActions-DXuw6_5D.js";import"./TablePagination-CnPGfMYI.js";import"./FirstPage-g7XaU7CH.js";import"./FormControlLabel-BXyUhOdn.js";import"./Switch-BEAoBhNK.js";import"./SwitchBase-i39qGljK.js";import"./empty-content-DAIjjgZ6.js";import"./FormLabel-CU7-epWv.js";import"./Menu-CNl6fHH1.js";import"./index-BfYlpBiz.js";import"./ListItem-Bnl0Gvye.js";import"./ListItemSecondaryAction-CutXm0zI.js";import"./tslib.es6-D0YySzq7.js";function T({title:s,total:a,icon:x,color:d,percent:t,price:m}){return e.jsxs(b,{spacing:2.5,direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:200},children:[e.jsxs(b,{alignItems:"center",justifyContent:"center",sx:{position:"relative"},children:[e.jsx(h,{icon:x,width:32,sx:{color:d,position:"absolute"}}),e.jsx(U,{variant:"determinate",value:t,size:56,thickness:2,sx:{color:d,opacity:.48}}),e.jsx(U,{variant:"determinate",value:100,size:56,thickness:3,sx:{top:0,left:0,opacity:.48,position:"absolute",color:i=>M(i.palette.grey[500],.16)}})]}),e.jsxs(b,{spacing:.5,children:[e.jsx(O,{variant:"subtitle1",children:s}),e.jsxs(B,{component:"span",sx:{color:"text.disabled",typography:"body2"},children:[Ee(a)," invoices"]}),e.jsx(O,{variant:"subtitle2",children:Y(m)})]})]})}function $e({row:s,selected:a,onSelectRow:x,onViewRow:d,onEditRow:t,onDeleteRow:m}){const{sent:i,invoiceNumber:g,createDate:c,dueDate:r,status:n,invoiceTo:l,totalAmount:j}=s,D=$(),v=q();return e.jsxs(e.Fragment,{children:[e.jsxs(We,{hover:!0,selected:a,children:[e.jsx(C,{padding:"checkbox",children:e.jsx(ee,{checked:a,onClick:x})}),e.jsxs(C,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ce,{alt:l.name,sx:{mr:2},children:l.name.charAt(0).toUpperCase()}),e.jsx(W,{disableTypography:!0,primary:e.jsx(O,{variant:"body2",noWrap:!0,children:l.name}),secondary:e.jsx(de,{noWrap:!0,variant:"body2",onClick:d,sx:{color:"text.disabled",cursor:"pointer"},children:g})})]}),e.jsx(C,{children:e.jsx(W,{primary:z(c),secondary:N(c),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(C,{children:e.jsx(W,{primary:z(r),secondary:N(r),primaryTypographyProps:{typography:"body2",noWrap:!0},secondaryTypographyProps:{mt:.5,component:"span",typography:"caption"}})}),e.jsx(C,{children:Y(j)}),e.jsx(C,{align:"center",children:i}),e.jsx(C,{children:e.jsx(J,{variant:"soft",color:n==="paid"&&"success"||n==="pending"&&"warning"||n==="overdue"&&"error"||"default",children:n})}),e.jsx(C,{align:"right",sx:{px:1},children:e.jsx(w,{color:v.open?"inherit":"default",onClick:v.onOpen,children:e.jsx(h,{icon:"eva:more-vertical-fill"})})})]}),e.jsxs(Z,{open:v.open,onClose:v.onClose,arrow:"right-top",sx:{width:160},children:[e.jsxs(y,{onClick:()=>{d(),v.onClose()},children:[e.jsx(h,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(y,{onClick:()=>{t(),v.onClose()},children:[e.jsx(h,{icon:"solar:pen-bold"}),"Edit"]}),e.jsx(Q,{sx:{borderStyle:"dashed"}}),e.jsxs(y,{onClick:()=>{D.onTrue(),v.onClose()},sx:{color:"error.main"},children:[e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]}),e.jsx(X,{open:D.value,onClose:D.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(F,{variant:"contained",color:"error",onClick:m,children:"Delete"})})]})}function qe({filters:s,onFilters:a,dateError:x,serviceOptions:d}){const t=q(),m=p.useCallback(r=>{a("name",r.target.value)},[a]),i=p.useCallback(r=>{a("service",typeof r.target.value=="string"?r.target.value.split(","):r.target.value)},[a]),g=p.useCallback(r=>{a("startDate",r)},[a]),c=p.useCallback(r=>{a("endDate",r)},[a]);return e.jsxs(e.Fragment,{children:[e.jsxs(b,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(Ve,{sx:{flexShrink:0,width:{xs:1,md:180}},children:[e.jsx(He,{children:"Service"}),e.jsx(Ge,{multiple:!0,value:s.service,onChange:i,input:e.jsx(Ke,{label:"Service"}),renderValue:r=>r.map(n=>n).join(", "),sx:{textTransform:"capitalize"},children:d.map(r=>e.jsxs(y,{value:r,children:[e.jsx(ee,{disableRipple:!0,size:"small",checked:s.service.includes(r)}),r]},r))})]}),e.jsx(G,{label:"Start date",value:s.startDate,onChange:g,slotProps:{textField:{fullWidth:!0}},sx:{maxWidth:{md:180}}}),e.jsx(G,{label:"End date",value:s.endDate,onChange:c,slotProps:{textField:{fullWidth:!0,error:x,helperText:x&&"End date must be later than start date"}},sx:{maxWidth:{md:180},[`& .${_e.root}`]:{position:{md:"absolute"},bottom:{md:-40}}}}),e.jsxs(b,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(Ue,{fullWidth:!0,value:s.name,onChange:m,placeholder:"Search customer or invoice number...",InputProps:{startAdornment:e.jsx(pe,{position:"start",children:e.jsx(h,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(w,{onClick:t.onOpen,children:e.jsx(h,{icon:"eva:more-vertical-fill"})})]})]}),e.jsxs(Z,{open:t.open,onClose:t.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(y,{onClick:()=>{t.onClose()},children:[e.jsx(h,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(y,{onClick:()=>{t.onClose()},children:[e.jsx(h,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(y,{onClick:()=>{t.onClose()},children:[e.jsx(h,{icon:"solar:export-bold"}),"Export"]})]})]})}function Je({filters:s,onFilters:a,onResetFilters:x,results:d,...t}){const m=Me(s.startDate,s.endDate),i=p.useCallback(()=>{a("name","")},[a]),g=p.useCallback(n=>{const l=s.service.filter(j=>j!==n);a("service",l)},[s.service,a]),c=p.useCallback(()=>{a("status","all")},[a]),r=p.useCallback(()=>{a("startDate",null),a("endDate",null)},[a]);return e.jsxs(b,{spacing:1.5,...t,children:[e.jsxs(B,{sx:{typography:"body2"},children:[e.jsx("strong",{children:d}),e.jsx(B,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(b,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!s.service.length&&e.jsx(L,{label:"Service:",children:s.service.map(n=>e.jsx(A,{label:n,size:"small",onDelete:()=>g(n)},n))}),s.status!=="all"&&e.jsx(L,{label:"Status:",children:e.jsx(A,{size:"small",label:s.status,onDelete:c})}),s.startDate&&s.endDate&&e.jsx(L,{label:"Date:",children:e.jsx(A,{size:"small",label:m,onDelete:r})}),!!s.name&&e.jsx(L,{label:"Keyword:",children:e.jsx(A,{label:s.name,size:"small",onDelete:i})}),e.jsx(F,{color:"error",onClick:x,startIcon:e.jsx(h,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function L({label:s,children:a,sx:x,...d}){return e.jsxs(b,{component:he,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...x},...d,children:[e.jsx(B,{component:"span",sx:{typography:"subtitle2"},children:s}),e.jsx(b,{spacing:1,direction:"row",flexWrap:"wrap",children:a})]})}const Ze=[{id:"invoiceNumber",label:"Customer"},{id:"createDate",label:"Create"},{id:"dueDate",label:"Due"},{id:"price",label:"Amount"},{id:"sent",label:"Sent",align:"center"},{id:"status",label:"Status"},{id:""}],K={name:"",service:[],status:"all",startDate:null,endDate:null};function Qe(){const{enqueueSnackbar:s}=me(),a=ue(),x=xe(),d=ge(),t=ke({defaultOrderBy:"createDate"}),m=$(),[i,g]=p.useState(je),[c,r]=p.useState(K),n=be(c.startDate,c.endDate),l=Xe({inputData:i,comparator:Se(t.order,t.orderBy),filters:c,dateError:n}),j=l.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage),D=t.dense?56:76,v=!!c.name||!!c.service.length||c.status!=="all"||!!c.startDate&&!!c.endDate,te=!l.length&&v||!l.length,f=o=>i.filter(u=>u.status===o).length,k=o=>_(i.filter(u=>u.status===o),"totalAmount"),S=o=>f(o)/i.length*100,se=[{value:"all",label:"All",color:"default",count:i.length},{value:"paid",label:"Paid",color:"success",count:f("paid")},{value:"pending",label:"Pending",color:"warning",count:f("pending")},{value:"overdue",label:"Overdue",color:"error",count:f("overdue")},{value:"draft",label:"Draft",color:"default",count:f("draft")}],R=p.useCallback((o,u)=>{t.onResetPage(),r(E=>({...E,[o]:u}))},[t]),oe=p.useCallback(()=>{r(K)},[]),ae=p.useCallback(o=>{const u=i.filter(E=>E.id!==o);s("Delete success!"),g(u),t.onUpdatePageDeleteRow(j.length)},[j.length,s,t,i]),ne=p.useCallback(()=>{const o=i.filter(u=>!t.selected.includes(u.id));s("Delete success!"),g(o),t.onUpdatePageDeleteRows({totalRowsInPage:j.length,totalRowsFiltered:l.length})},[l.length,j.length,s,t,i]),re=p.useCallback(o=>{d.push(P.dashboard.invoice.edit(o))},[d]),le=p.useCallback(o=>{d.push(P.dashboard.invoice.details(o))},[d]),ie=p.useCallback((o,u)=>{R("status",u)},[R]);return e.jsxs(e.Fragment,{children:[e.jsxs(ve,{maxWidth:x.themeStretch?!1:"lg",children:[e.jsx(Te,{heading:"List",links:[{name:"Dashboard",href:P.dashboard.root},{name:"Invoice",href:P.dashboard.invoice.root},{name:"List"}],action:e.jsx(F,{component:fe,href:P.dashboard.invoice.new,variant:"contained",startIcon:e.jsx(h,{icon:"mingcute:add-line"}),children:"New Invoice"}),sx:{mb:{xs:3,md:5}}}),e.jsx(V,{sx:{mb:{xs:3,md:5}},children:e.jsx(H,{children:e.jsxs(b,{direction:"row",divider:e.jsx(Q,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:2},children:[e.jsx(T,{title:"Total",total:i.length,percent:100,price:_(i,"totalAmount"),icon:"solar:bill-list-bold-duotone",color:a.palette.info.main}),e.jsx(T,{title:"Paid",total:f("paid"),percent:S("paid"),price:k("paid"),icon:"solar:file-check-bold-duotone",color:a.palette.success.main}),e.jsx(T,{title:"Pending",total:f("pending"),percent:S("pending"),price:k("pending"),icon:"solar:sort-by-time-bold-duotone",color:a.palette.warning.main}),e.jsx(T,{title:"Overdue",total:f("overdue"),percent:S("overdue"),price:k("overdue"),icon:"solar:bell-bing-bold-duotone",color:a.palette.error.main}),e.jsx(T,{title:"Draft",total:f("draft"),percent:S("draft"),price:k("draft"),icon:"solar:file-corrupted-bold-duotone",color:a.palette.text.secondary})]})})}),e.jsxs(V,{children:[e.jsx(Ce,{value:c.status,onChange:ie,sx:{px:2.5,boxShadow:`inset 0 -2px 0 0 ${M(a.palette.grey[500],.08)}`},children:se.map(o=>e.jsx(ye,{value:o.value,label:o.label,iconPosition:"end",icon:e.jsx(J,{variant:(o.value==="all"||o.value===c.status)&&"filled"||"soft",color:o.color,children:o.count})},o.value))}),e.jsx(qe,{filters:c,onFilters:R,dateError:n,serviceOptions:we.map(o=>o.name)}),v&&e.jsx(Je,{filters:c,onFilters:R,onResetFilters:oe,results:l.length,sx:{p:2.5,pt:0}}),e.jsxs(Oe,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(Re,{dense:t.dense,numSelected:t.selected.length,rowCount:l.length,onSelectAllRows:o=>{t.onSelectAllRows(o,l.map(u=>u.id))},action:e.jsxs(b,{direction:"row",children:[e.jsx(I,{title:"Sent",children:e.jsx(w,{color:"primary",children:e.jsx(h,{icon:"iconamoon:send-fill"})})}),e.jsx(I,{title:"Download",children:e.jsx(w,{color:"primary",children:e.jsx(h,{icon:"eva:download-outline"})})}),e.jsx(I,{title:"Print",children:e.jsx(w,{color:"primary",children:e.jsx(h,{icon:"solar:printer-minimalistic-bold"})})}),e.jsx(I,{title:"Delete",children:e.jsx(w,{color:"primary",onClick:m.onTrue,children:e.jsx(h,{icon:"solar:trash-bin-trash-bold"})})})]})}),e.jsx(H,{children:e.jsxs(ze,{size:t.dense?"small":"medium",sx:{minWidth:800},children:[e.jsx(Fe,{order:t.order,orderBy:t.orderBy,headLabel:Ze,rowCount:l.length,numSelected:t.selected.length,onSort:t.onSort,onSelectAllRows:o=>t.onSelectAllRows(o,l.map(u=>u.id))}),e.jsxs(Ne,{children:[l.slice(t.page*t.rowsPerPage,t.page*t.rowsPerPage+t.rowsPerPage).map(o=>e.jsx($e,{row:o,selected:t.selected.includes(o.id),onSelectRow:()=>t.onSelectRow(o.id),onViewRow:()=>le(o.id),onEditRow:()=>re(o.id),onDeleteRow:()=>ae(o.id)},o.id)),e.jsx(Be,{height:D,emptyRows:Ie(t.page,t.rowsPerPage,l.length)}),e.jsx(Le,{notFound:te})]})]})})]}),e.jsx(Ae,{count:l.length,page:t.page,rowsPerPage:t.rowsPerPage,onPageChange:t.onChangePage,onRowsPerPageChange:t.onChangeRowsPerPage,dense:t.dense,onChangeDense:t.onChangeDense})]})]}),e.jsx(X,{open:m.value,onClose:m.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",t.selected.length," "]})," items?"]}),action:e.jsx(F,{variant:"contained",color:"error",onClick:()=>{ne(),m.onFalse()},children:"Delete"})})]})}function Xe({inputData:s,comparator:a,filters:x,dateError:d}){const{name:t,status:m,service:i,startDate:g,endDate:c}=x,r=s.map((n,l)=>[n,l]);return r.sort((n,l)=>{const j=a(n[0],l[0]);return j!==0?j:n[1]-l[1]}),s=r.map(n=>n[0]),t&&(s=s.filter(n=>n.invoiceNumber.toLowerCase().indexOf(t.toLowerCase())!==-1||n.invoiceTo.name.toLowerCase().indexOf(t.toLowerCase())!==-1)),m!=="all"&&(s=s.filter(n=>n.status===m)),i.length&&(s=s.filter(n=>n.items.some(l=>i.includes(l.service)))),d||g&&c&&(s=s.filter(n=>De(n.createDate,g,c))),s}function _t(){return e.jsxs(e.Fragment,{children:[e.jsx(Pe,{children:e.jsx("title",{children:" Dashboard: Invoice List"})}),e.jsx(Qe,{})]})}export{_t as default};
