import{j as t,I as g,B as y,e as P,ak as v,r as p,t as b,T as j,ar as C,C as I,S as k,p as w,U as B}from"./index-CmpgrDwc.js";import{m as O,p as A}from"./index-eI8kmcAu.js";import"./_calendar-B-5cAUho.js";import"./styles-wyEAlZOR.js";import"./label-DwGXxIb8.js";import"./styles-CqxbtSrS.js";import"./image-DyYFaMXh.js";import"./text-max-line-DWihkOs2.js";import"./index.esm--1KtC-fu.js";import"./upgrade-storage-illustration-Dk6v7bjn.js";import"./styles-Bz6wqEZy.js";import{S as T,o as f}from"./search-not-found-FZBlnND-.js";import{u as L}from"./use-debounce-B5Pt6Xge.js";import{u as W,a as F,P as R}from"./post-list-6dz063UO.js";import{C as E}from"./custom-popover-BV-vDfKg.js";import{u as H}from"./use-popover-DcRsDCP2.js";import{B as U}from"./Button-Bt0QxDkD.js";import{M}from"./MenuItem-BzrVgfpN.js";import{A as Q}from"./Autocomplete-BPIisnLq.js";import{T as K}from"./TextField-VdzC0ET7.js";import{I as N}from"./InputAdornment-CuEU2YfE.js";import{A as V}from"./Avatar-DLK-7V62.js";import"./_baseIteratee-CzbPYqpW.js";import"./format-time-CqTx3WSS.js";import"./format-number-B-p5jkjD.js";import"./Card-DQJd_M2p.js";import"./CardContent-9VcppRCN.js";import"./Close-DrVxCuWi.js";import"./createSvgIcon-BNW9tbpD.js";import"./Chip-DcjeuKCe.js";import"./useFormControl-U02CZENT.js";import"./formControlState-Dq1zat_P.js";import"./useSlot-gI-MEnyg.js";const _=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function z({sort:o,sortOptions:r,onSort:l}){const n=H();return t.jsxs(t.Fragment,{children:[t.jsxs(U,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:t.jsx(g,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",t.jsx(y,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:o})]}),t.jsx(E,{open:n.open,onClose:n.onClose,sx:{width:140},children:r.map(i=>t.jsx(M,{selected:o===i.value,onClick:()=>{n.onClose(),l(i.value)},children:i.label},i.value))})]})}function G({query:o,results:r,onSearch:l,hrefItem:n,loading:i}){const m=P(),c=e=>{m.push(n(e))},u=e=>{o&&e.key==="Enter"&&c(o)};return t.jsx(Q,{sx:{width:{xs:1,sm:260}},loading:i,autoHighlight:!0,popupIcon:null,options:r,onInputChange:(e,s)=>l(s),getOptionLabel:e=>e.title,noOptionsText:t.jsx(T,{query:o,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(e,s)=>e.id===s.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${v.option}`]:{pl:.75}}}},renderInput:e=>t.jsx(K,{...e,placeholder:"Search...",onKeyUp:u,InputProps:{...e.InputProps,startAdornment:t.jsx(N,{position:"start",children:t.jsx(g,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:t.jsxs(t.Fragment,{children:[i?t.jsx(g,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,e.InputProps.endAdornment]})}}),renderOption:(e,s,{inputValue:d})=>{const h=O(s.title,d),x=A(s.title,h);return p.createElement("li",{...e,key:s.id},t.jsx(V,{alt:s.title,src:s.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},s.id),t.jsx(b,{underline:"none",onClick:()=>c(s.title),children:x.map((a,S)=>t.jsx(j,{component:"span",color:a.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:a.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:a.text},S))},d))}})}function $(){const o=C(),[r,l]=p.useState("latest"),[n,i]=p.useState(""),m=L(n),{posts:c,postsLoading:u}=W(),{searchResults:e,searchLoading:s}=F(m),d=q({inputData:c,sortBy:r}),h=p.useCallback(a=>{l(a)},[]),x=p.useCallback(a=>{i(a)},[]);return t.jsxs(I,{maxWidth:o.themeStretch?!1:"lg",children:[t.jsx(j,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Blog"}),t.jsxs(k,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[t.jsx(G,{query:m,results:e,onSearch:x,loading:s,hrefItem:a=>w.post.details(a)}),t.jsx(z,{sort:r,onSort:h,sortOptions:_})]}),t.jsx(R,{posts:d,loading:u})]})}const q=({inputData:o,sortBy:r})=>r==="latest"?f(o,["createdAt"],["desc"]):r==="oldest"?f(o,["createdAt"],["asc"]):r==="popular"?f(o,["totalViews"],["desc"]):o;function Bt(){return t.jsxs(t.Fragment,{children:[t.jsx(B,{children:t.jsx("title",{children:" Post: List"})}),t.jsx($,{})]})}export{Bt as default};
