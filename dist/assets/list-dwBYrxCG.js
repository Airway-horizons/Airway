import{dB as E,r as p,j as e,bW as $,f as P,ed as L,M as y,bz as K,B as S,c as I,h as N,F as Z,i as J,cp as B,bu as z,d as k,e as u,l as O,S as R,I as X,A as Y,bv as U,a as ee,ee as oe,cz as se,p as T,v as ae,R as le,C as ne,cm as te,t as ie,co as re,ef as de,bt as ce,H as me}from"./index-DQumLT9L.js";import{c as pe,a as C}from"./mui-one-time-password-input.es-CrCnoD2A.js";import"./image-BQLAgES7.js";import"./highlight-DjC4x1cy.js";import"./styles-CbjE8cRF.js";import{C as W}from"./confirm-dialog-Bc-Xsgi3.js";import{C as he}from"./custom-breadcrumbs-BQV5gBXp.js";import{u as xe,g as ue,T as je,e as ge,a as be}from"./table-pagination-custom-BoBFiRKr.js";import{T as Ce}from"./table-no-data-CP2_rdMm.js";import{T as fe}from"./table-empty-rows-w9VmU_DA.js";import{T as we}from"./table-head-custom-aAraUG11.js";import{u as ye,F as ve,R as f,o as Re}from"./rhf-text-field-D4JfNq3U.js";import{R as Pe}from"./rhf-select-CLHcV5ee.js";import{R as Se}from"./rhf-autocomplete-Ft65NATt.js";import{D as Te}from"./DialogTitle-BR7MB9Ne.js";import{D as ke}from"./DialogContent-BWFRvN7V.js";import{A as Fe}from"./Alert-GYr9ZzaS.js";import{D as Ae}from"./DialogActions-BM5MBnWR.js";import{L as De}from"./LoadingButton-By3CRbWh.js";import{T as qe,a as Ie,b as Ee,c as Le}from"./TableHead-CQqIrshP.js";import{T as w}from"./TableCell-C3uJnGFm.js";import{C as H}from"./Checkbox-Sn2x42hf.js";import{F as Ne}from"./FormControl-CkY9ZgKl.js";import{I as Be,T as ze}from"./TextField-Y2PbW22P.js";import{S as Oe,O as We}from"./Select-DVR-Fv5D.js";import{C as A}from"./Chip-BV5fqBH-.js";import"./TablePagination-BxLclrvg.js";import"./FirstPage-BHRCtckg.js";import"./FormControlLabel-DtJZHq2N.js";import"./Switch-BGGFZMDP.js";import"./SwitchBase-C1d58dFN.js";import"./empty-content-C-k1mDHV.js";import"./Autocomplete-CrAcmVXV.js";import"./Close-88YqgUWU.js";import"./dialogTitleClasses-DoSL4AIa.js";import"./CircularProgress-D2eR23uJ.js";import"./FormLabel-DQT9OHMa.js";import"./Menu-DSL53x_F.js";function He({currentUser:o,open:s,onClose:c}){const{enqueueSnackbar:i}=E(),m=pe().shape({name:C().required("Name is required"),email:C().required("Email is required").email("Email must be a valid email address"),phoneNumber:C().required("Phone number is required"),address:C().required("Address is required"),country:C().required("Country is required"),company:C().required("Company is required"),state:C().required("State is required"),city:C().required("City is required"),role:C().required("Role is required")}),r=p.useMemo(()=>({name:(o==null?void 0:o.name)||"",email:(o==null?void 0:o.email)||"",phoneNumber:(o==null?void 0:o.phoneNumber)||"",address:(o==null?void 0:o.address)||"",country:(o==null?void 0:o.country)||"",state:(o==null?void 0:o.state)||"",city:(o==null?void 0:o.city)||"",zipCode:(o==null?void 0:o.zipCode)||"",status:o==null?void 0:o.status,company:(o==null?void 0:o.company)||"",role:(o==null?void 0:o.role)||""}),[o]),n=ye({resolver:Re(m),defaultValues:r}),{reset:l,handleSubmit:d,formState:{isSubmitting:t}}=n,g=d(async h=>{try{await new Promise(b=>setTimeout(b,500)),l(),c(),i("Update success!"),console.info("DATA",h)}catch(b){console.error(b)}});return e.jsx($,{fullWidth:!0,maxWidth:!1,open:s,onClose:c,PaperProps:{sx:{maxWidth:720}},children:e.jsxs(ve,{methods:n,onSubmit:g,children:[e.jsx(Te,{children:"Quick Update"}),e.jsxs(ke,{children:[e.jsx(Fe,{variant:"outlined",severity:"info",sx:{mb:3},children:"Account is waiting for confirmation"}),e.jsxs(P,{rowGap:3,columnGap:2,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)"},children:[e.jsx(Pe,{name:"status",label:"Status",children:L.map(h=>e.jsx(y,{value:h.value,children:h.label},h.value))}),e.jsx(P,{sx:{display:{xs:"none",sm:"block"}}}),e.jsx(f,{name:"name",label:"Full Name"}),e.jsx(f,{name:"email",label:"Email Address"}),e.jsx(f,{name:"phoneNumber",label:"Phone Number"}),e.jsx(Se,{name:"country",type:"country",label:"Country",placeholder:"Choose a country",fullWidth:!0,options:K.map(h=>h.label),getOptionLabel:h=>h}),e.jsx(f,{name:"state",label:"State/Region"}),e.jsx(f,{name:"city",label:"City"}),e.jsx(f,{name:"address",label:"Address"}),e.jsx(f,{name:"zipCode",label:"Zip/Code"}),e.jsx(f,{name:"company",label:"Company"}),e.jsx(f,{name:"role",label:"Role"})]})]}),e.jsxs(Ae,{children:[e.jsx(S,{variant:"outlined",onClick:c,children:"Cancel"}),e.jsx(De,{type:"submit",variant:"contained",loading:t,children:"Update"})]})]})})}function _e({row:o,selected:s,onEditRow:c,onSelectRow:i,onDeleteRow:m}){const{name:r,avatarUrl:n,company:l,role:d,status:t,email:g,phoneNumber:h}=o,b=I(),v=I(),j=N();return e.jsxs(e.Fragment,{children:[e.jsxs(qe,{hover:!0,selected:s,children:[e.jsx(w,{padding:"checkbox",children:e.jsx(H,{checked:s,onClick:i})}),e.jsxs(w,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Z,{alt:r,src:n,sx:{mr:2}}),e.jsx(J,{primary:r,secondary:g,primaryTypographyProps:{typography:"body2"},secondaryTypographyProps:{component:"span",color:"text.disabled"}})]}),e.jsx(w,{sx:{whiteSpace:"nowrap"},children:h}),e.jsx(w,{sx:{whiteSpace:"nowrap"},children:l}),e.jsx(w,{sx:{whiteSpace:"nowrap"},children:d}),e.jsx(w,{children:e.jsx(B,{variant:"soft",color:t==="active"&&"success"||t==="pending"&&"warning"||t==="banned"&&"error"||"default",children:t})}),e.jsxs(w,{align:"right",sx:{px:1,whiteSpace:"nowrap"},children:[e.jsx(z,{title:"Quick Edit",placement:"top",arrow:!0,children:e.jsx(k,{color:v.value?"inherit":"default",onClick:v.onTrue,children:e.jsx(u,{icon:"solar:pen-bold"})})}),e.jsx(k,{color:j.open?"inherit":"default",onClick:j.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),e.jsx(He,{currentUser:o,open:v.value,onClose:v.onFalse}),e.jsxs(O,{open:j.open,onClose:j.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(y,{onClick:()=>{b.onTrue(),j.onClose()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]}),e.jsxs(y,{onClick:()=>{c(),j.onClose()},children:[e.jsx(u,{icon:"solar:pen-bold"}),"Edit"]})]}),e.jsx(W,{open:b.value,onClose:b.onFalse,title:"Delete",content:"Are you sure want to delete?",action:e.jsx(S,{variant:"contained",color:"error",onClick:m,children:"Delete"})})]})}function Ge({filters:o,onFilters:s,roleOptions:c}){const i=N(),m=p.useCallback(n=>{s("name",n.target.value)},[s]),r=p.useCallback(n=>{s("role",typeof n.target.value=="string"?n.target.value.split(","):n.target.value)},[s]);return e.jsxs(e.Fragment,{children:[e.jsxs(R,{spacing:2,alignItems:{xs:"flex-end",md:"center"},direction:{xs:"column",md:"row"},sx:{p:2.5,pr:{xs:2.5,md:1}},children:[e.jsxs(Ne,{sx:{flexShrink:0,width:{xs:1,md:200}},children:[e.jsx(Be,{children:"Role"}),e.jsx(Oe,{multiple:!0,value:o.role,onChange:r,input:e.jsx(We,{label:"Role"}),renderValue:n=>n.map(l=>l).join(", "),MenuProps:{PaperProps:{sx:{maxHeight:240}}},children:c.map(n=>e.jsxs(y,{value:n,children:[e.jsx(H,{disableRipple:!0,size:"small",checked:o.role.includes(n)}),n]},n))})]}),e.jsxs(R,{direction:"row",alignItems:"center",spacing:2,flexGrow:1,sx:{width:1},children:[e.jsx(ze,{fullWidth:!0,value:o.name,onChange:m,placeholder:"Search...",InputProps:{startAdornment:e.jsx(X,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{color:"text.disabled"}})})}}),e.jsx(k,{onClick:i.onOpen,children:e.jsx(u,{icon:"eva:more-vertical-fill"})})]})]}),e.jsxs(O,{open:i.open,onClose:i.onClose,arrow:"right-top",sx:{width:140},children:[e.jsxs(y,{onClick:()=>{i.onClose()},children:[e.jsx(u,{icon:"solar:printer-minimalistic-bold"}),"Print"]}),e.jsxs(y,{onClick:()=>{i.onClose()},children:[e.jsx(u,{icon:"solar:import-bold"}),"Import"]}),e.jsxs(y,{onClick:()=>{i.onClose()},children:[e.jsx(u,{icon:"solar:export-bold"}),"Export"]})]})]})}function Me({filters:o,onFilters:s,onResetFilters:c,results:i,...m}){const r=p.useCallback(()=>{s("name","")},[s]),n=p.useCallback(()=>{s("status","all")},[s]),l=p.useCallback(d=>{const t=o.role.filter(g=>g!==d);s("role",t)},[o.role,s]);return e.jsxs(R,{spacing:1.5,...m,children:[e.jsxs(P,{sx:{typography:"body2"},children:[e.jsx("strong",{children:i}),e.jsx(P,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(R,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[o.status!=="all"&&e.jsx(D,{label:"Status:",children:e.jsx(A,{size:"small",label:o.status,onDelete:n})}),!!o.role.length&&e.jsx(D,{label:"Role:",children:o.role.map(d=>e.jsx(A,{label:d,size:"small",onDelete:()=>l(d)},d))}),!!o.name&&e.jsx(D,{label:"Keyword:",children:e.jsx(A,{label:o.name,size:"small",onDelete:r})}),e.jsx(S,{color:"error",onClick:c,startIcon:e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function D({label:o,children:s,sx:c,...i}){return e.jsxs(R,{component:Y,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...c},...i,children:[e.jsx(P,{component:"span",sx:{typography:"subtitle2"},children:o}),e.jsx(R,{spacing:1,direction:"row",flexWrap:"wrap",children:s})]})}const Ve=[{value:"all",label:"All"},...L],Qe=[{id:"name",label:"Name"},{id:"phoneNumber",label:"Phone Number",width:180},{id:"company",label:"Company",width:220},{id:"role",label:"Role",width:180},{id:"status",label:"Status",width:100},{id:"",width:88}],q={name:"",role:[],status:"all"};function $e(){const{enqueueSnackbar:o}=E(),s=xe(),c=U(),i=ee(),m=I(),[r,n]=p.useState(oe),[l,d]=p.useState(q),t=Ke({inputData:r,comparator:ue(s.order,s.orderBy),filters:l}),g=t.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage),h=s.dense?56:76,b=!se(q,l),v=!t.length&&b||!t.length,j=p.useCallback((a,x)=>{s.onResetPage(),d(F=>({...F,[a]:x}))},[s]),_=p.useCallback(()=>{d(q)},[]),G=p.useCallback(a=>{const x=r.filter(F=>F.id!==a);o("Delete success!"),n(x),s.onUpdatePageDeleteRow(g.length)},[g.length,o,s,r]),M=p.useCallback(()=>{const a=r.filter(x=>!s.selected.includes(x.id));o("Delete success!"),n(a),s.onUpdatePageDeleteRows({totalRowsInPage:g.length,totalRowsFiltered:t.length})},[t.length,g.length,o,s,r]),V=p.useCallback(a=>{i.push(T.dashboard.user.edit(a))},[i]),Q=p.useCallback((a,x)=>{j("status",x)},[j]);return e.jsxs(e.Fragment,{children:[e.jsxs(ae,{maxWidth:c.themeStretch?!1:"lg",children:[e.jsx(he,{heading:"List",links:[{name:"Dashboard",href:T.dashboard.root},{name:"User",href:T.dashboard.user.root},{name:"List"}],action:e.jsx(S,{component:le,href:T.dashboard.user.new,variant:"contained",startIcon:e.jsx(u,{icon:"mingcute:add-line"}),children:"New User"}),sx:{mb:{xs:3,md:5}}}),e.jsxs(ne,{children:[e.jsx(te,{value:l.status,onChange:Q,sx:{px:2.5,boxShadow:a=>`inset 0 -2px 0 0 ${ie(a.palette.grey[500],.08)}`},children:Ve.map(a=>e.jsx(re,{iconPosition:"end",value:a.value,label:a.label,icon:e.jsx(B,{variant:(a.value==="all"||a.value===l.status)&&"filled"||"soft",color:a.value==="active"&&"success"||a.value==="pending"&&"warning"||a.value==="banned"&&"error"||"default",children:["active","pending","banned","rejected"].includes(a.value)?r.filter(x=>x.status===a.value).length:r.length})},a.value))}),e.jsx(Ge,{filters:l,onFilters:j,roleOptions:de}),b&&e.jsx(Me,{filters:l,onFilters:j,onResetFilters:_,results:t.length,sx:{p:2.5,pt:0}}),e.jsxs(Ie,{sx:{position:"relative",overflow:"unset"},children:[e.jsx(je,{dense:s.dense,numSelected:s.selected.length,rowCount:t.length,onSelectAllRows:a=>s.onSelectAllRows(a,t.map(x=>x.id)),action:e.jsx(z,{title:"Delete",children:e.jsx(k,{color:"primary",onClick:m.onTrue,children:e.jsx(u,{icon:"solar:trash-bin-trash-bold"})})})}),e.jsx(ce,{children:e.jsxs(Ee,{size:s.dense?"small":"medium",sx:{minWidth:960},children:[e.jsx(we,{order:s.order,orderBy:s.orderBy,headLabel:Qe,rowCount:t.length,numSelected:s.selected.length,onSort:s.onSort,onSelectAllRows:a=>s.onSelectAllRows(a,t.map(x=>x.id))}),e.jsxs(Le,{children:[t.slice(s.page*s.rowsPerPage,s.page*s.rowsPerPage+s.rowsPerPage).map(a=>e.jsx(_e,{row:a,selected:s.selected.includes(a.id),onSelectRow:()=>s.onSelectRow(a.id),onDeleteRow:()=>G(a.id),onEditRow:()=>V(a.id)},a.id)),e.jsx(fe,{height:h,emptyRows:ge(s.page,s.rowsPerPage,t.length)}),e.jsx(Ce,{notFound:v})]})]})})]}),e.jsx(be,{count:t.length,page:s.page,rowsPerPage:s.rowsPerPage,onPageChange:s.onChangePage,onRowsPerPageChange:s.onChangeRowsPerPage,dense:s.dense,onChangeDense:s.onChangeDense})]})]}),e.jsx(W,{open:m.value,onClose:m.onFalse,title:"Delete",content:e.jsxs(e.Fragment,{children:["Are you sure want to delete ",e.jsxs("strong",{children:[" ",s.selected.length," "]})," items?"]}),action:e.jsx(S,{variant:"contained",color:"error",onClick:()=>{M(),m.onFalse()},children:"Delete"})})]})}function Ke({inputData:o,comparator:s,filters:c}){const{name:i,status:m,role:r}=c,n=o.map((l,d)=>[l,d]);return n.sort((l,d)=>{const t=s(l[0],d[0]);return t!==0?t:l[1]-d[1]}),o=n.map(l=>l[0]),i&&(o=o.filter(l=>l.name.toLowerCase().indexOf(i.toLowerCase())!==-1)),m!=="all"&&(o=o.filter(l=>l.status===m)),r.length&&(o=o.filter(l=>r.includes(l.role))),o}function Eo(){return e.jsxs(e.Fragment,{children:[e.jsx(me,{children:e.jsx("title",{children:" Dashboard: User List"})}),e.jsx($e,{})]})}export{Eo as default};
