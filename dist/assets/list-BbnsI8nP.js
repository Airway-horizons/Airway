import{j as t,I as g,B as y,e as P,ai as v,r as p,L as b,T as j,ap as C,C as I,S as w,p as k,R as B}from"./index-BeqSvFdx.js";import{m as O,p as A}from"./styles-CfKqrYFI.js";import"./_calendar-CwMtJhpE.js";import"./axios-DvVLzkf3.js";import"./label-_cLy60NE.js";import"./styles-CuajBVzG.js";import"./image-C28n8gFq.js";import"./text-max-line-D5jd5EpQ.js";import"./index.esm-aOmBlU9I.js";import"./upgrade-storage-illustration-Cl4bBGDg.js";import"./styles-BAzuZZSy.js";import{S as L,o as f}from"./search-not-found-OxbVQxCK.js";import{u as T}from"./use-debounce-BqAquGn9.js";import{u as W,a as F,P as R}from"./post-list-BnAnVZ-D.js";import{C as E}from"./custom-popover-DlSNauQC.js";import{u as H}from"./use-popover-uhvNbQg9.js";import{B as M}from"./Button-e3NxAGlE.js";import{M as Q}from"./MenuItem-BOxjvZfz.js";import{A as U}from"./Autocomplete-Bfud0MfP.js";import{T as K}from"./TextField-CJUfAXj_.js";import{I as N}from"./InputAdornment-Bh02mCKt.js";import{A as V}from"./Avatar-BWEyCkgg.js";import"./_baseIteratee-DSKU7bFi.js";import"./format-time-CzRS7M6b.js";import"./format-number-EjGnuMZh.js";import"./Card-DQA9ub0E.js";import"./CardContent-qsCc5iL4.js";import"./Close-D9doIty9.js";import"./createSvgIcon-D6_KGotx.js";import"./Chip-DpLqfiAn.js";import"./useFormControl-BCoRm7HX.js";import"./formControlState-Dq1zat_P.js";import"./useSlot-BfAPfM4K.js";const _=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function z({sort:o,sortOptions:r,onSort:l}){const n=H();return t.jsxs(t.Fragment,{children:[t.jsxs(M,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:t.jsx(g,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",t.jsx(y,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:o})]}),t.jsx(E,{open:n.open,onClose:n.onClose,sx:{width:140},children:r.map(i=>t.jsx(Q,{selected:o===i.value,onClick:()=>{n.onClose(),l(i.value)},children:i.label},i.value))})]})}function G({query:o,results:r,onSearch:l,hrefItem:n,loading:i}){const m=P(),c=e=>{m.push(n(e))},u=e=>{o&&e.key==="Enter"&&c(o)};return t.jsx(U,{sx:{width:{xs:1,sm:260}},loading:i,autoHighlight:!0,popupIcon:null,options:r,onInputChange:(e,s)=>l(s),getOptionLabel:e=>e.title,noOptionsText:t.jsx(L,{query:o,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(e,s)=>e.id===s.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${v.option}`]:{pl:.75}}}},renderInput:e=>t.jsx(K,{...e,placeholder:"Search...",onKeyUp:u,InputProps:{...e.InputProps,startAdornment:t.jsx(N,{position:"start",children:t.jsx(g,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:t.jsxs(t.Fragment,{children:[i?t.jsx(g,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,e.InputProps.endAdornment]})}}),renderOption:(e,s,{inputValue:d})=>{const h=O(s.title,d),x=A(s.title,h);return p.createElement("li",{...e,key:s.id},t.jsx(V,{alt:s.title,src:s.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},s.id),t.jsx(b,{underline:"none",onClick:()=>c(s.title),children:x.map((a,S)=>t.jsx(j,{component:"span",color:a.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:a.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:a.text},S))},d))}})}function $(){const o=C(),[r,l]=p.useState("latest"),[n,i]=p.useState(""),m=T(n),{posts:c,postsLoading:u}=W(),{searchResults:e,searchLoading:s}=F(m),d=q({inputData:c,sortBy:r}),h=p.useCallback(a=>{l(a)},[]),x=p.useCallback(a=>{i(a)},[]);return t.jsxs(I,{maxWidth:o.themeStretch?!1:"lg",children:[t.jsx(j,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Blog"}),t.jsxs(w,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[t.jsx(G,{query:m,results:e,onSearch:x,loading:s,hrefItem:a=>k.post.details(a)}),t.jsx(z,{sort:r,onSort:h,sortOptions:_})]}),t.jsx(R,{posts:d,loading:u})]})}const q=({inputData:o,sortBy:r})=>r==="latest"?f(o,["createdAt"],["desc"]):r==="oldest"?f(o,["createdAt"],["asc"]):r==="popular"?f(o,["totalViews"],["desc"]):o;function Bt(){return t.jsxs(t.Fragment,{children:[t.jsx(B,{children:t.jsx("title",{children:" Post: List"})}),t.jsx($,{})]})}export{Bt as default};
