import{cx as q,j as e,S as h,cn as N,L as K,R as Y,f as y,C as J,p as M,e as S,bs as Q,h as X,B as z,l as Z,M as ee,a as re,bm as ne,bn as se,I as te,bo as oe,bp as ae,r as g,F as ie,T as R,bq as E,bd as le,D as ce,br as de,d as G,ay as pe,t as V,as as xe,A as he,bt as me,c as ue,cy as ge,v as je,cz as be,cA as fe,cB as Ce,cC as ye,cD as Re,H as ve}from"./index-9PXStj3N.js";import"./axios-CJ6ZaYuI.js";import"./mui-one-time-password-input.es-bso2ZfVA.js";import{I as Se}from"./image-DkY_3MJo.js";import"./highlight-LvrKAosx.js";import"./styles-CVRUAcvd.js";import{o as T}from"./orderBy-CdvVaZS5.js";import{u as ke}from"./use-debounce-BHOofycO.js";import{u as Pe,a as we}from"./product-I2p7MEds.js";import{E as Ie}from"./empty-content-DAIjjgZ6.js";import{f as _}from"./format-number-DdI7Nsn7.js";import{C as Oe}from"./color-picker-CTSI1nop.js";import{C as Te}from"./color-preview-D49-eUqI.js";import{F as Ae}from"./Fab-CZFPMrm_.js";import{P as Be}from"./product-skeleton-B4lEgg11.js";import{P as Fe,p as Le}from"./Pagination-BSnuHY16.js";import{C as We}from"./cart-icon-BJOtvMCN.js";import{A as $e}from"./Autocomplete-BaJmFtAK.js";import{T as ze}from"./TextField-CbHhpLIE.js";import{F as U}from"./FormControlLabel-BXyUhOdn.js";import{C as Ne}from"./Checkbox-CM-8Bpaf.js";import{R as Ee}from"./Radio-D28jkdQg.js";import{S as Ge}from"./Slider-9P9moZCF.js";import{R as _e}from"./Rating-BbBh16UC.js";import{C as I}from"./Chip-DxwugM88.js";import"./_baseToString-BZnTwQyE.js";import"./incrementer-button-rJk4Y-V0.js";import"./product-details-carousel-Qaf2cyyb.js";import"./styles-BxmT1WIQ.js";import"./_baseIteratee-Cb4M5Pop.js";import"./_baseEach-CAVOtf8X.js";import"./Skeleton-DmUipOkv.js";import"./FirstPage-g7XaU7CH.js";import"./Select-De9_G4gT.js";import"./Menu-CNl6fHH1.js";import"./Close-DY-CD3mo.js";import"./FormControl-BNnV7ofI.js";import"./FormLabel-CU7-epWv.js";import"./SwitchBase-i39qGljK.js";import"./visuallyHidden-Dan1xhjv.js";import"./use-light-box-iH2oBSdD.js";import"./carousel-arrow-index-BCSN-_M-.js";function Ue({product:r}){const{onAddToCart:c}=q(),{id:o,name:n,coverUrl:s,price:x,colors:a,available:u,sizes:i,priceSale:l,newLabel:d,saleLabel:p}=r,m=M.product.details(o),j=async()=>{const f={id:o,name:n,coverUrl:s,available:u,price:x,colors:[a[0]],size:i[0],quantity:1};try{c(f)}catch(v){console.error(v)}},k=(d.enabled||p.enabled)&&e.jsxs(h,{direction:"row",alignItems:"center",spacing:1,sx:{position:"absolute",zIndex:9,top:16,right:16},children:[d.enabled&&e.jsx(N,{variant:"filled",color:"info",children:d.content}),p.enabled&&e.jsx(N,{variant:"filled",color:"error",children:p.content})]}),P=e.jsxs(y,{sx:{position:"relative",p:1},children:[!!u&&e.jsx(Ae,{color:"warning",size:"medium",className:"add-cart-btn",onClick:j,sx:{right:16,bottom:16,zIndex:9,opacity:0,position:"absolute",transition:f=>f.transitions.create("all",{easing:f.transitions.easing.easeInOut,duration:f.transitions.duration.shorter})},children:e.jsx(S,{icon:"solar:cart-plus-bold",width:24})}),e.jsx(Q,{title:!u&&"Out of stock",placement:"bottom-end",children:e.jsx(Se,{alt:n,src:s,ratio:"1/1",sx:{borderRadius:1.5,...!u&&{opacity:.48,filter:"grayscale(1)"}}})})]}),w=e.jsxs(h,{spacing:2.5,sx:{p:3,pt:2},children:[e.jsx(K,{component:Y,href:m,color:"inherit",variant:"subtitle2",noWrap:!0,children:n}),e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(Te,{colors:a}),e.jsxs(h,{direction:"row",spacing:.5,sx:{typography:"subtitle1"},children:[l&&e.jsx(y,{component:"span",sx:{color:"text.disabled",textDecoration:"line-through"},children:_(l)}),e.jsx(y,{component:"span",children:_(x)})]})]})]});return e.jsxs(J,{sx:{"&:hover .add-cart-btn":{opacity:1}},children:[k,P,w]})}function He({products:r,loading:c,...o}){const n=e.jsx(e.Fragment,{children:[...Array(16)].map((x,a)=>e.jsx(Be,{},a))}),s=e.jsx(e.Fragment,{children:r.map(x=>e.jsx(Ue,{product:x},x.id))});return e.jsxs(e.Fragment,{children:[e.jsx(y,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(3, 1fr)",lg:"repeat(4, 1fr)"},...o,children:c?n:s}),r.length>8&&e.jsx(Fe,{count:8,sx:{mt:8,[`& .${Le.ul}`]:{justifyContent:"center"}}})]})}function qe({sort:r,onSort:c,sortOptions:o}){var x;const n=X(),s=(x=o.find(a=>a.value===r))==null?void 0:x.label;return e.jsxs(e.Fragment,{children:[e.jsxs(z,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:e.jsx(S,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold"},children:["Sort By:",e.jsx(y,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:s})]}),e.jsx(Z,{open:n.open,onClose:n.onClose,sx:{width:140},children:o.map(a=>e.jsx(ee,{selected:a.value===r,onClick:()=>{n.onClose(),c(a.value)},children:a.label},a.value))})]})}function Me({query:r,results:c,onSearch:o,hrefItem:n,loading:s}){const x=re(),a=i=>{x.push(n(i))},u=i=>{if(r&&i.key==="Enter"){const l=c.filter(d=>d.name===r)[0];a(l.id)}};return e.jsx($e,{sx:{width:{xs:1,sm:260}},loading:s,autoHighlight:!0,popupIcon:null,options:c,onInputChange:(i,l)=>o(l),getOptionLabel:i=>i.name,noOptionsText:e.jsx(ne,{query:r,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(i,l)=>i.id===l.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${se.option}`]:{pl:.75}}}},renderInput:i=>e.jsx(ze,{...i,placeholder:"Search...",onKeyUp:u,InputProps:{...i.InputProps,startAdornment:e.jsx(te,{position:"start",children:e.jsx(S,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[s?e.jsx(S,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,i.InputProps.endAdornment]})}}),renderOption:(i,l,{inputValue:d})=>{const p=oe(l.name,d),m=ae(l.name,p);return g.createElement(y,{component:"li",...i,onClick:()=>a(l.id),key:l.id},e.jsx(ie,{alt:l.name,src:l.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},l.id),e.jsx("div",{children:m.map((j,k)=>e.jsx(R,{component:"span",color:j.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:j.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:j.text},k))},d))}})}function Qe({open:r,onOpen:c,onClose:o,filters:n,onFilters:s,canReset:x,onResetFilters:a,colorOptions:u,genderOptions:i,ratingOptions:l,categoryOptions:d}){const p=[...Array(21)].map((t,C)=>{const b=C*10,W=C===0?`$${b}`:`${b}`;return{value:b,label:C%4?"":W}}),m=g.useCallback(t=>{const C=n.gender.includes(t)?n.gender.filter(b=>b!==t):[...n.gender,t];s("gender",C)},[n.gender,s]),j=g.useCallback(t=>{s("category",t)},[s]),k=g.useCallback(t=>{s("colors",t)},[s]),P=g.useCallback((t,C)=>{s("priceRange",C)},[s]),w=g.useCallback(t=>{s("rating",t)},[s]),f=e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{py:2,pr:1,pl:2.5},children:[e.jsx(R,{variant:"h6",sx:{flexGrow:1},children:"Filters"}),e.jsx(Q,{title:"Reset",children:e.jsx(G,{onClick:a,children:e.jsx(E,{color:"error",variant:"dot",invisible:!x,children:e.jsx(S,{icon:"solar:restart-bold"})})})}),e.jsx(G,{onClick:o,children:e.jsx(S,{icon:"mingcute:close-line"})})]}),v=e.jsxs(h,{children:[e.jsx(R,{variant:"subtitle2",sx:{mb:1},children:"Gender"}),i.map(t=>e.jsx(U,{control:e.jsx(Ne,{checked:n.gender.includes(t.label),onClick:()=>m(t.label)}),label:t.label},t.value))]}),A=e.jsxs(h,{children:[e.jsx(R,{variant:"subtitle2",sx:{mb:1},children:"Category"}),d.map(t=>e.jsx(U,{control:e.jsx(Ee,{checked:t===n.category,onClick:()=>j(t)}),label:t,sx:{...t==="all"&&{textTransform:"capitalize"}}},t))]}),B=e.jsxs(h,{children:[e.jsx(R,{variant:"subtitle2",sx:{mb:1},children:"Color"}),e.jsx(Oe,{selected:n.colors,onSelectColor:t=>k(t),colors:u,limit:6})]}),F=e.jsxs(h,{children:[e.jsx(R,{variant:"subtitle2",sx:{flexGrow:1},children:"Price"}),e.jsxs(h,{direction:"row",spacing:5,sx:{my:2},children:[e.jsx(H,{type:"min",value:n.priceRange,onFilters:s}),e.jsx(H,{type:"max",value:n.priceRange,onFilters:s})]}),e.jsx(Ge,{value:n.priceRange,onChange:P,step:10,min:0,max:200,marks:p,getAriaValueText:t=>`$${t}`,valueLabelFormat:t=>`$${t}`,sx:{alignSelf:"center",width:"calc(100% - 24px)"}})]}),L=e.jsxs(h,{spacing:2,alignItems:"flex-start",children:[e.jsx(R,{variant:"subtitle2",children:"Rating"}),l.map((t,C)=>e.jsxs(h,{direction:"row",onClick:()=>w(t),sx:{borderRadius:1,cursor:"pointer",typography:"body2","&:hover":{opacity:.48},...n.rating===t&&{pl:.5,pr:.75,py:.25,bgcolor:"action.selected"}},children:[e.jsx(_e,{readOnly:!0,value:4-C,sx:{mr:1}})," & Up"]},t))]});return e.jsxs(e.Fragment,{children:[e.jsx(z,{disableRipple:!0,color:"inherit",endIcon:e.jsx(E,{color:"error",variant:"dot",invisible:!x,children:e.jsx(S,{icon:"ic:round-filter-list"})}),onClick:c,children:"Filters"}),e.jsxs(le,{anchor:"right",open:r,onClose:o,slotProps:{backdrop:{invisible:!0}},PaperProps:{sx:{width:280}},children:[f,e.jsx(ce,{}),e.jsx(de,{sx:{px:2.5,py:3},children:e.jsxs(h,{spacing:3,children:[v,A,B,F,L]})})]})]})}function H({type:r,value:c,onFilters:o}){const n=c[0],s=c[1],x=g.useCallback(()=>{n<0&&o("priceRange",[0,s]),n>200&&o("priceRange",[200,s]),s<0&&o("priceRange",[n,0]),s>200&&o("priceRange",[n,200])},[s,n,o]);return e.jsxs(h,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{width:1},children:[e.jsx(R,{variant:"caption",sx:{flexShrink:0,color:"text.disabled",textTransform:"capitalize",fontWeight:"fontWeightSemiBold"},children:`${r} ($)`}),e.jsx(pe,{fullWidth:!0,value:r==="min"?n:s,onChange:a=>r==="min"?o("priceRange",[Number(a.target.value),s]):o("priceRange",[n,Number(a.target.value)]),onBlur:x,inputProps:{step:10,min:0,max:200,type:"number","aria-labelledby":"input-slider"},sx:{maxWidth:48,borderRadius:.75,bgcolor:a=>V(a.palette.grey[500],.08),[`& .${xe.input}`]:{pr:1,py:.75,textAlign:"right",typography:"body2"}}})]})}function Ve({filters:r,onFilters:c,canReset:o,onResetFilters:n,results:s,...x}){const a=p=>{const m=r.gender.filter(j=>j!==p);c("gender",m)},u=()=>{c("category","all")},i=p=>{const m=r.colors.filter(j=>j!==p);c("colors",m)},l=()=>{c("priceRange",[0,200])},d=()=>{c("rating","")};return e.jsxs(h,{spacing:1.5,...x,children:[e.jsxs(y,{sx:{typography:"body2"},children:[e.jsx("strong",{children:s}),e.jsx(y,{component:"span",sx:{color:"text.secondary",ml:.25},children:"results found"})]}),e.jsxs(h,{flexGrow:1,spacing:1,direction:"row",flexWrap:"wrap",alignItems:"center",children:[!!r.gender.length&&e.jsx(O,{label:"Gender:",children:r.gender.map(p=>e.jsx(I,{label:p,size:"small",onDelete:()=>a(p)},p))}),r.category!=="all"&&e.jsx(O,{label:"Category:",children:e.jsx(I,{size:"small",label:r.category,onDelete:u})}),!!r.colors.length&&e.jsx(O,{label:"Colors:",children:r.colors.map(p=>e.jsx(I,{size:"small",label:e.jsx(y,{sx:{ml:-.5,width:18,height:18,bgcolor:p,borderRadius:"50%",border:m=>`solid 1px ${V(m.palette.common.white,.24)}`}}),onDelete:()=>i(p)},p))}),(r.priceRange[0]!==0||r.priceRange[1]!==200)&&e.jsx(O,{label:"Price:",children:e.jsx(I,{size:"small",label:`$${r.priceRange[0]} - ${r.priceRange[1]}`,onDelete:l})}),!!r.rating&&e.jsx(O,{label:"Rating:",children:e.jsx(I,{size:"small",label:r.rating,onDelete:d})}),o&&e.jsx(z,{color:"error",onClick:n,startIcon:e.jsx(S,{icon:"solar:trash-bin-trash-bold"}),children:"Clear"})]})]})}function O({label:r,children:c,sx:o,...n}){return e.jsxs(h,{component:he,variant:"outlined",spacing:1,direction:"row",sx:{p:1,borderRadius:1,overflow:"hidden",borderStyle:"dashed",...o},...n,children:[e.jsx(y,{component:"span",sx:{typography:"subtitle2"},children:r}),e.jsx(h,{spacing:1,direction:"row",flexWrap:"wrap",children:c})]})}const $={gender:[],colors:[],rating:"",category:"all",priceRange:[0,200]};function De(){const r=me(),c=q(),o=ue(),[n,s]=g.useState("featured"),[x,a]=g.useState(""),u=ke(x),[i,l]=g.useState($),{products:d,productsLoading:p,productsEmpty:m}=Pe(),{searchResults:j,searchLoading:k}=we(u),P=g.useCallback((b,W)=>{l(D=>({...D,[b]:W}))},[]),w=g.useCallback(()=>{l($)},[]),f=Ke({inputData:d,filters:i,sortBy:n}),v=!ge($,i),A=!f.length&&v,B=g.useCallback(b=>{s(b)},[]),F=g.useCallback(b=>{a(b)},[]),L=e.jsxs(h,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},children:[e.jsx(Me,{query:u,results:j,onSearch:F,loading:k,hrefItem:b=>M.product.details(b)}),e.jsxs(h,{direction:"row",spacing:1,flexShrink:0,children:[e.jsx(Qe,{open:o.value,onOpen:o.onTrue,onClose:o.onFalse,filters:i,onFilters:P,canReset:v,onResetFilters:w,colorOptions:be,ratingOptions:fe,genderOptions:Ce,categoryOptions:["all",...ye]}),e.jsx(qe,{sort:n,onSort:B,sortOptions:Re})]})]}),t=e.jsx(Ve,{filters:i,onFilters:P,canReset:v,onResetFilters:w,results:f.length}),C=e.jsx(Ie,{filled:!0,title:"No Data",sx:{py:10}});return e.jsxs(je,{maxWidth:r.themeStretch?!1:"lg",sx:{mb:15},children:[e.jsx(We,{totalItems:c.totalItems}),e.jsx(R,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Shop"}),e.jsxs(h,{spacing:2.5,sx:{mb:{xs:3,md:5}},children:[L,v&&t]}),(A||m)&&C,e.jsx(He,{products:f,loading:p})]})}function Ke({inputData:r,filters:c,sortBy:o}){const{gender:n,category:s,colors:x,priceRange:a,rating:u}=c,i=a[0],l=a[1];return o==="featured"&&(r=T(r,["totalSold"],["desc"])),o==="newest"&&(r=T(r,["createdAt"],["desc"])),o==="priceDesc"&&(r=T(r,["price"],["desc"])),o==="priceAsc"&&(r=T(r,["price"],["asc"])),n.length&&(r=r.filter(d=>n.includes(d.gender))),s!=="all"&&(r=r.filter(d=>d.category===s)),x.length&&(r=r.filter(d=>d.colors.some(p=>x.includes(p)))),(i!==0||l!==200)&&(r=r.filter(d=>d.price>=i&&d.price<=l)),u&&(r=r.filter(d=>{const p=m=>m==="up4Star"?4:m==="up3Star"?3:m==="up2Star"?2:1;return d.totalRatings>p(u)})),r}function Nr(){return e.jsxs(e.Fragment,{children:[e.jsx(ve,{children:e.jsx("title",{children:" Product: Shop"})}),e.jsx(De,{})]})}export{Nr as default};
