import{j as t,I as g,B as y,e as P,al as v,r as p,t as b,T as j,as as C,C as I,S as w,p as k,V as B}from"./index-CafVMSYt.js";import{m as O,p as A}from"./index-CkvbPhkc.js";import"./_calendar-DZKelDvM.js";import"./styles-BdvrlCbx.js";import"./label-CglxYri5.js";import"./styles-BMM5Y4if.js";import"./image-cBTbp58M.js";import"./text-max-line-DoaN3Z_n.js";import"./index.esm-dahdJBVj.js";import"./upgrade-storage-illustration-DyhLz6J2.js";import"./styles-R_MOHyM_.js";import{S as T,o as f}from"./search-not-found-CNeYU9vJ.js";import{u as L}from"./use-debounce-CzYLpwmG.js";import{u as W,a as F,P as R}from"./post-list-C06RMdVd.js";import{C as E}from"./custom-popover-CZET8AuV.js";import{u as H}from"./use-popover-BVDE_Val.js";import{B as M}from"./Button-wQ5i7FG4.js";import{M as Q}from"./MenuItem-BjFv3SeP.js";import{A as U}from"./Autocomplete-BfbZAlRD.js";import{T as V}from"./TextField-Da_wZnaZ.js";import{I as K}from"./InputAdornment-jOjWxC7D.js";import{A as N}from"./Avatar-Bg1aZLkE.js";import"./_baseIteratee-CTIkAF6j.js";import"./format-time-Djm_gqlz.js";import"./format-number-CsQ-KLlm.js";import"./Card-DLEfol-U.js";import"./CardContent-B-iMcS3v.js";import"./Close-CV49Zp75.js";import"./createSvgIcon-cjeLSNn0.js";import"./Chip-D21Ns1iX.js";import"./useFormControl-GSROItdj.js";import"./formControlState-Dq1zat_P.js";import"./useSlot-CWGkrjUC.js";const _=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function z({sort:o,sortOptions:r,onSort:l}){const n=H();return t.jsxs(t.Fragment,{children:[t.jsxs(M,{disableRipple:!0,color:"inherit",onClick:n.onOpen,endIcon:t.jsx(g,{icon:n.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",t.jsx(y,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:o})]}),t.jsx(E,{open:n.open,onClose:n.onClose,sx:{width:140},children:r.map(i=>t.jsx(Q,{selected:o===i.value,onClick:()=>{n.onClose(),l(i.value)},children:i.label},i.value))})]})}function G({query:o,results:r,onSearch:l,hrefItem:n,loading:i}){const m=P(),c=e=>{m.push(n(e))},u=e=>{o&&e.key==="Enter"&&c(o)};return t.jsx(U,{sx:{width:{xs:1,sm:260}},loading:i,autoHighlight:!0,popupIcon:null,options:r,onInputChange:(e,s)=>l(s),getOptionLabel:e=>e.title,noOptionsText:t.jsx(T,{query:o,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(e,s)=>e.id===s.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${v.option}`]:{pl:.75}}}},renderInput:e=>t.jsx(V,{...e,placeholder:"Search...",onKeyUp:u,InputProps:{...e.InputProps,startAdornment:t.jsx(K,{position:"start",children:t.jsx(g,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:t.jsxs(t.Fragment,{children:[i?t.jsx(g,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,e.InputProps.endAdornment]})}}),renderOption:(e,s,{inputValue:d})=>{const h=O(s.title,d),x=A(s.title,h);return p.createElement("li",{...e,key:s.id},t.jsx(N,{alt:s.title,src:s.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},s.id),t.jsx(b,{underline:"none",onClick:()=>c(s.title),children:x.map((a,S)=>t.jsx(j,{component:"span",color:a.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:a.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:a.text},S))},d))}})}function $(){const o=C(),[r,l]=p.useState("latest"),[n,i]=p.useState(""),m=L(n),{posts:c,postsLoading:u}=W(),{searchResults:e,searchLoading:s}=F(m),d=q({inputData:c,sortBy:r}),h=p.useCallback(a=>{l(a)},[]),x=p.useCallback(a=>{i(a)},[]);return t.jsxs(I,{maxWidth:o.themeStretch?!1:"lg",children:[t.jsx(j,{variant:"h4",sx:{my:{xs:3,md:5}},children:"Blog"}),t.jsxs(w,{spacing:3,justifyContent:"space-between",alignItems:{xs:"flex-end",sm:"center"},direction:{xs:"column",sm:"row"},sx:{mb:{xs:3,md:5}},children:[t.jsx(G,{query:m,results:e,onSearch:x,loading:s,hrefItem:a=>k.post.details(a)}),t.jsx(z,{sort:r,onSort:h,sortOptions:_})]}),t.jsx(R,{posts:d,loading:u})]})}const q=({inputData:o,sortBy:r})=>r==="latest"?f(o,["createdAt"],["desc"]):r==="oldest"?f(o,["createdAt"],["asc"]):r==="popular"?f(o,["totalViews"],["desc"]):o;function Bt(){return t.jsxs(t.Fragment,{children:[t.jsx(B,{children:t.jsx("title",{children:" Post: List"})}),t.jsx($,{})]})}export{Bt as default};
